(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(a){a.extend(a.fn,{easyList:function(c){if(!this.length){return}var d=a.data(this[0],"easyList");if(d){return d}var b=a(this[0]).attr("id");if(!b){b="easylist-"+(Math.random()+"").substring(2);a(this[0]).attr("id",b)}d=new a.easyList(c,this[0]);a.data(this[0],"easyList",d);if(d.settings.actions.search.btn){a(d.settings.actions.search.btn).click(function(){d.search()})}if(d.settings.actions.search.form){a(d.settings.actions.search.form).submit(function(){return false});a(d.settings.actions.search.form).keydown(function(f){if(f.which==13){d.search()}})}if(d.settings.actions.deleteBatch.btn){a(d.settings.actions.deleteBatch.btn).click(function(){d.deleteBatch()})}if(d.settings.actions.row){a.each(d.settings.actions.row,function(g,f){var e="#"+b+" [act="+g+"]";a(document).on("click",e,function(i){var j=a(i.target).parents("tr").data("index");var h=a(i.target).closest("[act="+g+"]").data();if(a.isFunction(f)){f(d.getData()[j],h,j,f)}else{d[g]&&d[g](d.getData()[j],h,j,f)}})})}return d}});a.easyList=function(b,c){var d=this;this.settings=a.extend(true,{module:"",actions:{search:{},deleteBatch:{},row:{}},columns:{queryParams:function(e){return a(d.settings.actions.search.form).serializeArray()}}},b);this.currentTable=c;this.init()};a.extend(a.easyList,{prototype:{init:function(){this.settings.columns.url=this.settings.columns.url||this.settings.module+"query.do";a(this.currentTable).bootstrapTable(this.settings.columns)},search:function(c){if(c){c=a.isFunction(c)?c():c}var b=c;if(a.isPlainObject(c)){b=[];a.each(c,function(d,e){b.push({name:d,value:e})})}a(this.currentTable).bootstrapTable("refresh",{query:b})},reload:function(b){this.search(b)},selections:function(b){var c=a(this.currentTable).bootstrapTable("getSelections");if(b){return a.map(c,function(d){return d[b]})}else{return c}},getData:function(){return a(this.currentTable).bootstrapTable("getData")},removeRow:function(b){return a(this.currentTable).bootstrapTable("remove",b)},deleteRow:function(e,d,b,c){var f=this;confirm.danger({message:"确定要删除该记录?",callbacks:[function(){a.post((c.url||f.settings.module+"delete.do"),{rowId:e.rowId},function(g){if(g.status=="0"){alert.success({message:g.msg,callback:function(){f.search()}})}else{alert.warning(g.msg)}},"json")}]})},deleteBatch:function(){var d=this;var b=[];var c=a(d.currentTable).bootstrapTable("getSelections");if(c.length>0){confirm.danger({message:"确定要删除选中的记录?",callbacks:[function(){a.each(c,function(){b.push(this.rowId)});a.post((d.settings.actions.deleteBatch.url||d.settings.module+"deleteBatch.do"),{rowIds:b},function(e){if(e.status=="0"){alert.success({message:e.msg,callback:function(){d.search()}})}else{alert.warning(e.msg)}},"json")}]})}else{alert.danger("请选择记录删除!")}}}});a.easyList.isExist=function(b){return a(b).data("easyList")?true:false}}));